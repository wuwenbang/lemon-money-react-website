{"version":3,"sources":["hooks/useUpdate.tsx","utils/createId.tsx","hooks/useBookmark.tsx","pages/App.jsx","index.jsx"],"names":["useUpdate","fn","dependency","count","useRef","useEffect","current","id","parseInt","window","localStorage","getItem","createId","setItem","JSON","stringify","useBookmark","useState","bookmarks","setBookmarks","locakBookmarks","parse","length","url","createBookmark","newUrl","prompt","indexOf","newBookmarkUrl","newBookmark","deleteBookmark","filter","item","App","onDeleteBookmark","e","currentTarget","className","action","target","aria-hidden","xlinkHref","onFocus","document","querySelector","style","boxShadow","onBlur","name","placeholder","autoComplete","autoFocus","maxLength","type","map","key","href","src","onClick","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.463b3c7e.chunk.js","sourcesContent":["import { useRef, useEffect } from 'react'\n\nconst useUpdate = (fn: () => void, dependency: any[]) => {\n  const count = useRef(0)\n  useEffect(() => {\n    count.current += 1\n  })\n  useEffect(() => {\n    //避免第一次渲染时执行fn\n    if (count.current > 1) {\n      fn()\n    }\n  }, [fn, dependency])\n}\n\nexport default useUpdate\n","let id = parseInt(window.localStorage.getItem('idMax') || '0')\nconst createId = () => {\n  id += 1\n  window.localStorage.setItem('idMax', JSON.stringify(id))\n  return id\n}\n\nexport default createId\n","import { useState, useEffect } from 'react'\nimport useUpdate from './useUpdate'\nimport createId from '../utils/createId'\ninterface Bookmark {\n  id: number\n  url: string\n}\nconst useBookmark = () => {\n  // const bookmarkData = JSON.parse(localStorage.getItem('bookmark'))\n\n  const [bookmarks, setBookmarks] = useState<Bookmark[]>([])\n  useEffect(() => {\n    let locakBookmarks = JSON.parse(window.localStorage.getItem('bookmarks') || '[]')\n    if (locakBookmarks.length === 0) {\n      locakBookmarks = [\n        { id: createId(), url: 'https://www.gitee.com' },\n        { id: createId(), url: 'https://www.github.com' },\n        { id: createId(), url: 'https://www.zhihu.com' },\n        { id: createId(), url: 'https://www.bilibili.com' },\n        { id: createId(), url: 'https://www.jianshu.com' },\n        { id: createId(), url: 'https://www.douban.com' },\n      ]\n    }\n    setBookmarks(locakBookmarks)\n  }, [])\n  // 依赖更新自动存储到 localStorage\n  useUpdate(() => {\n    window.localStorage.setItem('bookmarks', JSON.stringify(bookmarks))\n  }, bookmarks)\n  const createBookmark = () => {\n    let newUrl: string | null = window.prompt('请输入网址:')\n    if (newUrl === null) {\n      newUrl = ''\n    }\n    if (newUrl.indexOf('http') !== 0) {\n      if (newUrl.indexOf('www.') === -1) {\n        newUrl = 'https://www.' + newUrl\n      } else {\n        newUrl = 'https://' + newUrl\n      }\n    }\n    const newBookmarkUrl = newUrl\n    const newBookmark: Bookmark = {\n      id: createId(),\n      url: newBookmarkUrl,\n    }\n    setBookmarks([...bookmarks, newBookmark])\n  }\n  const deleteBookmark = (id: number) => {\n    setBookmarks(bookmarks.filter((item) => item.id !== id))\n  }\n  return { bookmarks, setBookmarks, createBookmark, deleteBookmark }\n}\nexport default useBookmark\n","import React from 'react'\nimport './App.scss'\nimport useBookmark from '../hooks/useBookmark'\nfunction App() {\n  const { bookmarks, createBookmark, deleteBookmark } = useBookmark()\n  const onDeleteBookmark = (e) => {\n    deleteBookmark(parseInt(e.currentTarget.id))\n  }\n  const onFocusStyle = () => {\n    let search = document.querySelector('.search')\n    search.style.boxShadow = '0 0 0 2px rgba(150, 150, 150, 0.75)'\n  }\n  const onBlurStyle = () => {\n    let search = document.querySelector('.search')\n    search.style.boxShadow = 'none'\n  }\n  return (\n    <div className=\"wrapper\">\n      {/* <video autoPlay loop muted>\n        <source src=\"?\" type=\"video/mp4\" />\n      </video> */}\n      <div className=\"bg\"></div>\n      <form className=\"search\" id=\"myForm\" action=\"http://www.baidu.com/s\" target=\"_blank\">\n        <div className=\"search-icon\">\n          <svg className=\"icon\" aria-hidden=\"true\">\n            <use xlinkHref=\"#icon-baidu\"></use>\n          </svg>\n        </div>\n        <input\n          onFocus={onFocusStyle}\n          onBlur={onBlurStyle}\n          className=\"search-input\"\n          name=\"wd\"\n          placeholder=\"请输入搜索内容\"\n          autoComplete=\"off\"\n          autoFocus=\"autofocus\"\n          maxLength=\"255\"\n        />\n        <div className=\"search-button\">\n          <input className=\"search-submit\" type=\"submit\"></input>\n          <svg className=\"icon\" aria-hidden=\"true\">\n            <use xlinkHref=\"#icon-search\"></use>\n          </svg>\n        </div>\n      </form>\n      <ul className=\"bookmark-list\">\n        {bookmarks.map((item) => {\n          return (\n            <li className=\"bookmark-item\" key={item.id} id={item.id}>\n              <a className=\"bookmark-link\" href={item.url} target=\"_blank\">\n                <img className=\"bookmark-icon\" src={item.url + '/favicon.ico'}></img>\n              </a>\n              <svg className=\"icon bookmark-delete\" aria-hidden=\"true\" onClick={onDeleteBookmark} id={item.id}>\n                <use xlinkHref=\"#icon-close\"></use>\n              </svg>\n            </li>\n          )\n        })}\n        <li className=\"bookmark-item\">\n          <a className=\"bookmark-link\" onClick={createBookmark}>\n            <svg className=\"icon bookmark-icon bookmark-add\" aria-hidden=\"true\">\n              <use xlinkHref=\"#icon-add\"></use>\n            </svg>\n          </a>\n        </li>\n      </ul>\n      {/* <div className=\"star-wrapper\">\n        <div className=\"star-surround\">\n          <svg className=\"icon\" aria-hidden=\"true\" className=\"star\">\n            <use xlinkHref=\"#icon-earth\"></use>\n          </svg>\n          <svg className=\"icon\" aria-hidden=\"true\" className=\"cat\">\n            <use xlinkHref=\"#icon-cat\"></use>\n          </svg>\n        </div>\n      </div> */}\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.scss'\nimport App from './pages/App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}